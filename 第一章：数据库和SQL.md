# 第一章：数据库和SQL

## 数据库是什么

### 数据库（Database，DB）是将大量数据保存起来，通过计算机加工而成的可以进行高效访问 的数据集合

### 用来管理数据库的计算机系统称为数据库管理系统（Database Management System，DBMS）

### DBMS的种类

- 层次数据库（Hierarchical Database，HDB）

  最古老的数据库之一，它把数据通过层次结构（树形结构）的方式表
  现出来。层次数据库曾经是数据库的主流，但随着关系数据库的出现和普及，现在已经很少使用了。

- 关系数据库（Relational Database，RDB）

  关系数据库是现在应用最广泛的数据库。关系数据库在1969 年诞生， 可谓历史悠久。和 Excel 工作表一样，它也采用由行和列组成的二维表来 管理数据，所以简单易懂。同时，它还使用专门的 SQL（Structured Query Language，结构化查询语言）对数据进行操作。

	- 这种类型的 DBMS 称为关系数据库管理系统（Relational Database Management System，RDBMS）。比较具有代表性的 RDBMS 有如下 5种

		- Oracle Database：甲骨文公司的RDBM
		- SQL	Server：微软公司的RDBMS
		- DB2：IBM公司的RDBMS 
		- PostgreSQL：开源的RDBMS 
		- MySQL：开源的RDBMS 

- 面向对象数据库（Object Oriented Database，OODB）

  编程语言当中有一种被称为面向对象语言的语言。把数据以及对数
  据的操作集合起来以对象为单位进行管理，因此得名。面向对象数据库就
  是用来保存这些对象的数据库。

- XML数据库（XML Database，XMLDB）

  最近几年，XML作为在网络上进行交互的数据的形式逐渐普及起来。 XML 数据库可以对 XML 形式的大量数据进行高速处理。
  
  eXtensible Markup Language 的缩写，一种使用HTML那样的 标签来表现数据结构的语言。以 <name>铃木</name>这样的形 式来保存数据。

- 键值存储系统（Key-Value Store，KVS）

  这是一种单纯用来保存查询所使用的主键（Key）和值（Value）的组 合的数据库。具有编程语言知识的读者可以把它想象成关联数组或者散列 （hash）。近年来，随着键值存储系统被应用到Google 等需要对大量数据 进行超高速查询的 Web 服务当中，它正逐渐为人们所关注。

## 数据库的结构

### RDBMS通常使用客户端/服务器这样的系统结构

- 服务器：用来接收其他程序发出的请求，并对该请求进行相应处理的程序（软件），或者是安装了此类程序的设备（计算机）。
- 客户端：向服务器发出请求的程序（软件），或者是安装了该程序 的设备（计算机）

### 表的结构

- 用来管理数据的二维表在关系数据库中简称为表
- 表存储在由RDBMS 管理的数据库中。一个数据库中 可以存储多个表
- 根据SQL语句的内容返回的数据同样必须是二维表的形式	
- 表的列（垂直方向）称为字段，它代表了保存在表中的数据项目
- 表的行（水平方向）称为记录，它相当于一条数据
- 关系数据库必须以行为单位进行数据读写
- 单元格：行和列交汇的方格。一 个单元格中只 能输入一个数据		

## SQL概要

Structured Query Language
结构化查询语言

### SQL语句及其种类

SQL 用关键字、表名、列名等组合而成的一条语句（SQL 语句）来 描述操作的内容

- DDL（Data Definition Language，数据定义语言）

	- 用来创建或者删除存储 数据用的数据库以及数据库中的表等对象
	- CREATE：创建数据库和表等对象 
	- DROP： 删除数据库和表等对象 
	- ALTER： 修改数据库和表等对象的结构

- DML（Data Manipulation Language，数据操纵语言）

	- 用来查询或者变更 表中的记录
	- SELECT：查询表中的数据
	- INSERT：向表中插入新数据
	- UPDATE：更新表中的数据
	- DELETE：删除表中的数据

- DCL（Data	Control	Language，数据控制语言）

	- 用来确认或者取消对数据 库中的数据进行的变更。除此之外，还可以对 RDBMS的用户是否有权限 操作数据库中的对象（数据库表等）进行设定
	- COMMIT： 确认对数据库中的数据进行的变更 
	-  ROLLBACK：取消对数据库中的数据进行的变更
	- GRANT： 赋予用户操作权限 
	- REVOKE： 取消用户的操作权限

### SQL的基本书写规则 

- SQL语句要以分号（;）结尾
- SQL语句不区分大小写 
- 常数的书写方式是固定的 

	- SQL 语句常常需要直接书写字符串、日期或者数字
	- 字符串和日期常数需要使用单引号（'）括起来
	- 数字常数无需加注单引号（直接书写数字即可）

- 单词需要用半角空格或者换行来分隔

## 表的创建

### 数据库的创建

- CREATE DATABASE <数据库名称>;

### 表的创建

CREATE TABLE <表名> 
（<列名1> <数据类型> <该列所需约束>， <列名2> <数据类型> <该列所需约束>， 
<列名3> <数据类型> <该列所需约束>， 
<列名4> <数据类型> <该列所需约束>，      .      .      . 
<该表的约束1>， <该表的约束2>，……）；

- 每一列的数据类型（后述）是必 须要指定的，还要为需要的列设置约束（后述）
- 约束可以在定义列的时 候进行设置，也可以在语句的末尾进行设置 。
- 但是NOT NULL约束只能以列为 单位进行设置。

### 命名规则

- 我们只能使用半角英文字母、数字、下划线（_）作为数据库、表和 列的名称
- 名称必须以半角英文字母开头	
- 在同一个数据库中不能创建两个相同名称的表，在同 一个表中也不能创建两个名称相同的列。

### 数据类型的指定

- 列名右边的 INTEGER 或者CHAR 等关键字，是用来声明该 列的数据类型的，所有的列都必须指定数据类型。 
- INTEGER型

	- 用来指定存储整数的列的数据类型（数字型），不能存储小数。

- CHAR型

	- CHAR 是CHARACTER（字符）的缩写，是用来指定存储字符串的列 的数据类型（字符型）。可以像 CHAR(10) 或者 CHAR(200) 这样，在 括号中指定该列可以存储的字符串的长度（最大长度）。
	- 字符串以	定长字符串		的形式存储在被指定为CHAR 型的列中。所谓 定长字符串，就是当列中存储的字符串长度达不到最大长度的时候，使用半 角空格进行补足。

- VARCHAR型

	- 该类型的列是以可变长字符串的形式来保存字符串的 
	- 可变长字符串，即使字符数未达到最大长度，也不会用半角空格补足

- DATE型

	- 用来指定存储日期（年月日）的列的数据类型（日期型）

### 约束的设置

- 约束是除了数据类型之外，对列中存储的数据进行限制或者追加条件 的功能
- NOT NULL 约束

	- 该列设置了不能输入空白，也就是必须输入数据的约束（如果什么都不输入就会出错）

- PRIMARY KEY 主键约束

	- 所谓键，就是在指 定特定数据时使用的列的组合
	- 键种类多样，主键（primary key）就是可以特定一行数据的列 。

		- 特定一行数据，也可以说是唯一 确定一行数据。

	- 设置主键约束的列，无法输入重复数据

## 表的删除和更新

### 表的删除

- DROP TABLE <表名>;
- 删除的表是无法恢复的。即使是被误删的表，也无法恢复，只能重新创建，然后重新插入数据。

### 表定义的更新

- ALTER TABLE <表名> ADD COLUMN <列的定义>;
- ALTER TABLE <表名> DROP COLUMN <列名>;

### 向Product表中插入数据

- INSERT INTO Product VALUES ('0001', 'T恤衫', '衣服', 1000, 500, '2009-09-20');

### 变更表名

- MySQL：RENAME TABLE Poduct to Product; 

